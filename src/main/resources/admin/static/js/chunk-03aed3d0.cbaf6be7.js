(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-03aed3d0"],{"16d8":function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{attrs:{id:t.id}})},i=[],a=(o("2338"),o("f763"),o("fb37"),o("97a3")),n=(o("4640"),o("550e"),o("233f"),o("d341")),r=o.n(n),l={minHeight:"200px",previewStyle:"vertical",useCommandShortcut:!0,useDefaultHTMLSanitizer:!0,usageStatistics:!1,hideModeSwitch:!1,toolbarItems:["heading","bold","italic","strike","divider","hr","quote","divider","ul","ol","task","indent","outdent","divider","table","image","link","divider","code","codeblock"]};function u(t,e){var o=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),o.push.apply(o,s)}return o}function c(t){for(var e=1;e<arguments.length;e++){var o=null!=arguments[e]?arguments[e]:{};e%2?u(o,!0).forEach((function(e){Object(a["a"])(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):u(o).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}var d={name:"MarddownEditor",props:{value:{type:String,default:""},id:{type:String,required:!1,default:function(){return"markdown-editor-"+ +new Date+(1e3*Math.random()).toFixed(0)}},options:{type:Object,default:function(){return l}},mode:{type:String,default:"markdown"},height:{type:String,required:!1,default:"300px"},language:{type:String,required:!1,default:"en_US"}},data:function(){return{editor:null}},computed:{editorOptions:function(){var t=Object.assign({},l,this.options);return t.initialEditType=this.mode,t.height=this.height,t.language=this.language,t}},watch:{value:function(t,e){t!==e&&t!==this.editor.getValue()&&this.editor.setValue(t)},language:function(t){this.destroyEditor(),this.initEditor()},height:function(t){this.editor.height(t)},mode:function(t){this.editor.changeMode(t)}},mounted:function(){this.initEditor()},destroyed:function(){this.destroyEditor()},methods:{initEditor:function(){var t=this;this.editor=new r.a(c({el:document.getElementById(this.id)},this.editorOptions)),this.value&&this.editor.setValue(this.value),this.editor.on("change",(function(){t.$emit("input",t.editor.getValue())}))},destroyEditor:function(){this.editor&&(this.editor.off("change"),this.editor.remove())},setValue:function(t){this.editor.setValue(t)},getValue:function(){return this.editor.getValue()},setHtml:function(t){this.editor.setHtml(t)},getHtml:function(){return this.editor.getHtml()}}},p=d,m=o("6691"),h=Object(m["a"])(p,s,i,!1,null,null,null);e["a"]=h.exports},"45a2":function(t,e,o){"use strict";o.d(e,"c",(function(){return i})),o.d(e,"b",(function(){return a})),o.d(e,"a",(function(){return n})),o.d(e,"e",(function(){return r})),o.d(e,"d",(function(){return l}));var s=o("b775");function i(){return Object(s["a"])({url:"/pages",method:"get"})}function a(t){return Object(s["a"])({url:"/pages/"+t,method:"get"})}function n(t){return Object(s["a"])({url:"/pages",method:"post",data:t})}function r(t,e){return Object(s["a"])({url:"/pages/"+t,method:"put",data:e})}function l(t){return Object(s["a"])({url:"/pages/"+t,method:"delete"})}},"49f4":function(t,e,o){},c542:function(t,e,o){"use strict";var s=o("49f4"),i=o.n(s);i.a},cf2c:function(t,e,o){"use strict";o.r(e);var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("page-detail",{attrs:{"is-edit":!1}})},i=[],a=o("f98a"),n={name:"CreatePage",components:{PageDetail:a["a"]}},r=n,l=o("6691"),u=Object(l["a"])(r,s,i,!1,null,null,null);e["default"]=u.exports},f98a:function(t,e,o){"use strict";var s=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"app-container"},[o("el-form",{ref:"postForm",staticClass:"form-container",attrs:{model:t.postForm}},[o("el-col",{attrs:{span:24}},[o("el-row",[o("el-col",{attrs:{span:18}},[o("div",{staticClass:"post-main"},[o("el-tag",{staticClass:"tag-title"},[t._v("标题:")]),t._v(" "),o("el-input",{staticClass:"post-title",attrs:{autosize:"",placeholder:"请输入标题"},model:{value:t.postForm.title,callback:function(e){t.$set(t.postForm,"title",e)},expression:"postForm.title"}}),t._v(" "),o("el-tag",{staticClass:"tag-title"},[t._v("正文:")]),t._v(" "),o("markdown-editor",{ref:"markdownEditor",staticClass:"post-content",attrs:{options:{hideModeSwitch:!0,previewStyle:"tab"},language:t.language,height:"300px"},model:{value:t.postForm.content,callback:function(e){t.$set(t.postForm,"content",e)},expression:"postForm.content"}}),t._v(" "),o("el-tag",{staticClass:"tag-title"},[t._v("别名:")]),t._v(" "),o("el-input",{staticClass:"post-slug",attrs:{autosize:"",placeholder:"请输入别名"},model:{value:t.postForm.slug,callback:function(e){t.$set(t.postForm,"slug",e)},expression:"postForm.slug"}})],1)]),t._v(" "),o("el-col",{attrs:{span:6}},[o("div",{staticClass:"post-info"},[o("el-form-item",{staticClass:"post-author",attrs:{"label-width":"60px",label:"作者:"}},[o("el-select",{attrs:{"default-first-option":"",placeholder:"选择用户"},model:{value:t.postForm.authorId,callback:function(e){t.$set(t.postForm,"authorId",e)},expression:"postForm.authorId"}},t._l(t.remoteData.authors,(function(t){return o("el-option",{key:t.id+t.username,attrs:{label:t.username,value:t.id}})})),1)],1),t._v(" "),o("el-form-item",{staticClass:"post-status",attrs:{"label-width":"60px",label:"状态:"}},[o("el-select",{attrs:{"default-first-option":"",placeholder:"选择状态"},model:{value:t.postForm.status,callback:function(e){t.$set(t.postForm,"status",e)},expression:"postForm.status"}},t._l(t.remoteData.status,(function(t,e){return o("el-option",{key:t+e,attrs:{label:t.name,value:t.value}})})),1)],1),t._v(" "),o("el-form-item",{attrs:{"label-width":"80px",label:"允许评论:"}},[o("el-switch",{model:{value:t.postForm.isAllowComments,callback:function(e){t.$set(t.postForm,"isAllowComments",e)},expression:"postForm.isAllowComments"}})],1),t._v(" "),o("el-button",{staticStyle:{width:"100%"},attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提交")])],1)])],1)],1)],1)],1)},i=[],a=o("16d8"),n=o("c24f"),r=o("45a2"),l={name:"PageDetail",components:{MarkdownEditor:a["a"]},props:{isEdit:{type:Boolean,default:!1}},data:function(){return{languageTypeList:{en:"en_US",zh:"zh_CN",es:"es_ES"},remoteData:{authors:void 0,status:[{name:"发布",value:"publish"},{name:"草稿",value:"draft"}]},postForm:{title:void 0,content:void 0,slug:void 0,authorId:void 0,status:void 0,isAllowComments:!0}}},computed:{language:function(){return this.languageTypeList["zh"]}},created:function(){var t=this;if(Object(n["d"])().then((function(e){t.remoteData.authors=e})),this.isEdit){var e=this.$route.params&&this.$route.params.id;Object(r["b"])(e).then((function(e){t.postForm.title=e.title,t.postForm.content=e.content,t.postForm.slug=e.slug,t.postForm.authorId=e.author.id,t.postForm.status=e.status,t.postForm.isAllowComments=e.isAllowComments}))}},methods:{onSubmit:function(){var t=this;if(this.isEdit){var e=this.$route.params&&this.$route.params.id;Object(r["e"])(e,this.postForm).then((function(e){t.$message({showClose:!0,message:e.message,type:"success"}),t.$router.push("/page/manage")}))}else Object(r["a"])(this.postForm).then((function(e){t.$message({showClose:!0,message:e.message,type:"success"}),t.$router.push("/page/manage")}))}}},u=l,c=(o("c542"),o("6691")),d=Object(c["a"])(u,s,i,!1,null,"5a6769e2",null);e["a"]=d.exports}}]);